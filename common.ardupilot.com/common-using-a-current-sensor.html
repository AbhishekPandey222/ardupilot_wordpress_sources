<!-- 
START METADATA - Only title should be translated 
slug: common-using-a-current-sensor 
title: common-Attopilot 180A Voltage and Current Sensor 
id: 298 
menu_order: 10 
post_parent_id: 2633 
post_parent_stub: common-powermodule-landingpage 
post_parent_title: common-Power Modules (landing page) 
END METADATA 
-->
In general it is best to power your APM 2.5, 2.6, Pixhawk or PX4 with the <a href="wiki/common-measuring-battery-voltage-and-current-consumption-with-apm/" target="_blank">3DR power module </a>because it provides solid 5V power and also allows you to read current and voltage. But for cases where you need to measure over 18V (i.e. over 4S batteries) or current over 90A, you should use the <a href="https://www.sparkfun.com/products/10644" target="_blank">AttoPilot 180A current and voltage module</a> which can be purchased from <a href="https://www.sparkfun.com/products/10644" target="_blank">Sparkfun</a>.

<!--more-->

<h1>Connection to APM</h1>

<a href="http://planner.ardupilot.com/wp-content/uploads/sites/5/2013/06/ConnectionDiagram2.png"><img class="alignnone size-full wp-image-481" alt="ConnectionDiagram2" src="http://planner.ardupilot.com/wp-content/uploads/sites/5/2013/06/ConnectionDiagram2.png" width="941" height="635" /></a>

Connect the autopilot sensor to APM as shown in the photo above including connecting:
<blockquote>
<ul>
	<li><em><em>V pin (voltage) to APM's A1's S pin</em></em></li>
	<li><em><em>I pin (current) to APM's A2's S pin</em></em></li>
	<li><em><em>GND pin (ground) to APM's A1 "-" pin</em></em></li>
</ul>
</blockquote>



<h1>Connection to Pixhawk</h1>

<a href="http://planner.ardupilot.com/wp-content/uploads/sites/5/2013/06/Pixhawk_Non3DRCurrentSensor2.jpg"><img class="alignnone size-full wp-image-1660" alt="Pixhawk_Non3DRCurrentSensor2" src="http://planner.ardupilot.com/wp-content/uploads/sites/5/2013/06/Pixhawk_Non3DRCurrentSensor2.jpg" width="884" height="714" /></a>

Connecting the autopilot sensor to the Pixhawk requires modifying a <a href="http://store.3drobotics.com/products/df13-6-position-connector-45-cm" target="_blank">DF13 6 position cable</a> as shown in the photo above including connecting: 
<blockquote>
<ul>
	<li><em><em>V pin (voltage) to the Pixhawk's 3rd pin from the left</em></em></li>
	<li><em><em>I pin (current) to the Pixhawk's 4th pin from the left</em></em></li>
	<li><em><em>GND pin (ground) to the 1st pin on the left</em></em></li>
</ul>
</blockquote>



<h1>Setup in Mission Planner</h1>

To configure the sensor go to the Mission Planner's INITIAL SETUP &gt; Optional Hardware &gt; Battery Monitor page and set the "Monitor", "Sensor" and "APM" fields as shown in the image below.Â  If a battery is then connected you should see the "Battery voltage (Calced)" field become populated with the voltage of the battery.<em>
</em>

<a href="http://planner.ardupilot.com/wp-content/uploads/sites/5/2013/06/MP_AttoPilot180ACurrentSensor.png"><img class="alignnone size-full wp-image-485" alt="MP_AttoPilot180ACurrentSensor" src="http://planner.ardupilot.com/wp-content/uploads/sites/5/2013/06/MP_AttoPilot180ACurrentSensor.png" width="1024" height="446" /></a>

Note: Due to the voltage scaling of the sensor to 3.3V, the maximum current you can measure with the 180Amp sensor described here is actually 272Amps and for the smaller <a href="https://www.sparkfun.com/products/9028" target="_blank">AttoPilot 90A sensor</a> it is 136Amps.



http://www.youtube.com/watch?v=mDVIxqrmUmA



<h1>Calibrating the voltage sensor</h1>
You can calibrate the voltage sensor to match the voltage from a hand-held volt meter by following the instructions on the 3DR power module page <a href="wiki/common-measuring-battery-voltage-and-current-consumption-with-apm/#Calibrating_the_voltage_reading">here</a>.