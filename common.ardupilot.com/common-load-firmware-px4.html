<!-- 
START METADATA - Only title should be translated 
slug: common-load-firmware-px4 
title: common-Loading Firmware onto PX4 
id: 335 
menu_order: 0 
post_parent_id: 0 
post_parent_stub:  
post_parent_title:  
END METADATA 
-->
ArduPilot firmware can be used with PX4 FMU and PX4 IO autopilot boards, allowing you to use the same advanced, community-developed ArduPilot firmware with the high performance PX4 processor. This page provides instructions for downloading the latest firmware onto PX4 using <em>Mission Planner</em>, either as a part of first time setup or whenever you need to update the firmware.



<h1>Load firmware onto PX4 FMU</h1>

Connect your PX4 FMU board's micro USB port (shown below) to your computer using the supplied micro USB cable. <em>Click on images to enlarge.</em>

<a href="http://copter.ardupilot.com/wp-content/uploads/sites/2/2012/01/PX4FMU_PX4IO_USB.jpg"><img class=" wp-image-5076 alignnone" alt="PX4 FMU USB Port" src="http://copter.ardupilot.com/wp-content/uploads/sites/2/2012/01/PX4FMU_PX4IO_USB.jpg" width="304" height="159" /></a>

Open Mission Planner, and use the drop-down menus in the upper-right corner of the screen (near the Connect button) to connect to your PX4. Select the COM port listed as <strong>PX4 FMU</strong> and set the Baud rate to <strong>115200</strong> as shown. Don't hit Connect just yet.

<a href="http://copter.ardupilot.com/wp-content/uploads/sites/2/2013/06/px4-corner.png"><img class=" wp-image-6583 alignnone" title="Connect to PX4 COM Port" alt="Connect to PX4 COM Port" src="http://copter.ardupilot.com/wp-content/uploads/sites/2/2013/06/px4-corner.png" width="372" height="167" /></a>

Now we'll select which firmware to download to the PX4 FMU; this depends on the configuration of your copter.

Select the <strong>Hardware tab</strong>. Mission Planner will display the available firmware for copters as shown below. PX4 is compatible with Copter v3.0.0 and later only.

<a href="http://dev.ardupilot.com/wp-content/uploads/sites/6/2013/07/mission-planner-firmware-download.png"><img class="alignnone wp-image-1943" alt="mission planner firmware download" src="http://dev.ardupilot.com/wp-content/uploads/sites/6/2013/07/mission-planner-firmware-download.png" width="300" height="150" /></a>

Choose your copter's frame by clicking the corresponding icon: Quad, Hexa, Y6, or other. (We'll specify + or x configuration later.) Once you select your frame, Mission Planner will automatically detect the latest firmware version for your copter and prompt you to confirm the download. After selecting <strong>Yes</strong>, the progress bar will display the progress of the download,

After downloading the firmware, Mission Planner will detect the PX4 FMU and initiate the installation process by prompting the following dialog:

<img class=" size-full wp-image-6586" alt="press reset" src="http://copter.ardupilot.com/wp-content/uploads/sites/2/2013/06/press-reset.png" width="446" height="146" />

On the PX4 FMU board, press the reset button located to the right of the micro USB port. In Mission Planner, select <strong>OK</strong> within five seconds on pressing the reset button. Mission Planner will erase the contents of the PX4 FMU and program the selected firmware to the board.

<img class=" wp-image-6838" alt="Reset button px4" src="http://copter.ardupilot.com/wp-content/uploads/sites/2/2013/06/Reset-button-px4.jpg" width="367" height="190" />

To load the firmware, the PX4 is in upload mode, but in order to communicate with Mission Planner, the PX4 needs to be in USB MavLink mode. To perform this mode change, Mission Planner will prompt the following dialog:

<a href="http://copter.ardupilot.com/wp-content/uploads/sites/2/2013/06/please-unplug.png"><img class="wp-image-6590" alt="please unplug" src="http://copter.ardupilot.com/wp-content/uploads/sites/2/2013/06/please-unplug.png" width="449" height="116" /></a>

Unplug the USB cable from your computer's USB port, and plug it back in. This will switch the PX4 FMU into USB MavLink mode.

When the download status reads <strong>Done</strong>, your firmware download is complete.sp




<h1>Load MAVLink parameters from PX4 to Mission Planner</h1>

<ol>
	<li>Connect your PX4 to your computer via the USB cable.</li>
	<li>Ensure that the <strong>COM</strong> window on the top right is displaying your PX4's current port.
<ol>
	<li>Open the Com port list by selecting the down arrow to the right of the Com window.</li>
	<li>It should display something like <strong>COM 6 PX4 FMU V1.6 (COM6)</strong> Ensure that line is selected.</li>
</ol>
</li>
	<li>In Mission Planner, select the <strong>Connect</strong> icon in  the upper-right corner of the screen.</li>
	<li>This will copy the PX4's current MavLink parameters to the Mission Planner program.</li>
	<li>Mission Planner will display a window showing the progress of the MavLink download.</li>
</ol>
<img alt="Connect to MavLink" src="http://copter.ardupilot.com/wp-content/uploads/sites/2/2013/06/con-mavlink.png" width="307" height="136" />

<img title="Mission Planner APM Connection Status" alt="Mission Planner APM Connection Status" src="http://copter.ardupilot.com/wp-content/uploads/sites/2/2013/06/condiscon.png" width="284" height="132" />

When the window displays <strong>Done</strong> and Mission Planner shows the <strong>Disconnect</strong> option in place of Connect, MavLink parameters have been successfully updated. If this process produces an error or times out, try these troubleshooting steps:
<ul>
	<li>Unplug and replug the PX4 USB, and try connecting again after waiting 10 seconds.</li>
	<li>If it fails when you select the Connect icon, check that the "Com" window on the top right is displaying your PX4's com port.</li>
	<li>Use the Flight Data screen in Mission Planner to see if you can see the HUD on the screen move when you move the board.</li>
	<li>Select the Status tab (within the Flight Data screen) to view inputs from the PX4's sensors.
<ul>
	<li>This will show you that the PX4 system is working.</li>
</ul>
</li>
	<li>Connect the GPS module by connecting the 5-pin-to-6-pin cable from the GPS module to the beige GPS connector on the PX4FMU board (next to the 15 pin Multi connector).
<ul>
	<li>Connect the white plug on the GPS adapter cable to the white connector on the GPS board.</li>
	<li>Once connected, the GPS may be able to show your position indoors (and the blinking blue LED on the GPS will become solid on.).</li>
	<li>This will show you that the GPS is working correctly with the PX4.</li>
</ul>
</li>
</ul>
&nbsp;

[note]Additional firmware and alternate methods may be found here:</strong> <a title="setup" href="http://firmware.diydrones.com/" target="_blank">ArduPilot Firmware Builds Site</a>.[/note]