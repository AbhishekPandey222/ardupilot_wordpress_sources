<!-- 
START METADATA - Only title should be translated 
slug: sonar-parameter-tuning 
title: Sonar Parameter Tuning 
id: 4386 
menu_order: 0 
post_parent_id: 0 
post_parent_stub:  
post_parent_title:  
END METADATA 
-->
This topic explains how to tune the SONAR parameters.
<!-- more -->

<h1>Overview</h1>

<ul>
	<li>One or 2 SONARS may be used. The (2) indicates there are SONAR and SONAR2 versions of each parameter.</li>
	<li>SONAR Debounce lets you specify the number of returns before triggering an obstacle avoidance event, good for filtering false returns.</li>
	<li>Maximum and Minimum range of the SONAR can be set.</li>
	<li>The SONAR readings can be scaled and adjusted for your use.</li>
	<li>When an obstacle is detected you can set the correcting steering angle and the time to hold it.</li>
</ul>

<h1>SONAR parameters</h1>

<table>
<tbody>
<tr>
<td><code><a href="http://rover.ardupilot.com/wiki/apmrover2-parameters/#Sonar_pin_SONAR_PIN">SONAR_PIN(2)</a>
</code></td>
<td>0-100</td>
<td>The Analog Pin that the SONAR is Connected to.</td>
</tr>
<tr>
<td><code><a href="http://rover.ardupilot.com/wiki/apmrover2-parameters/#Sonar_scaling_SONAR_SCALING">SONAR_SCALING(2)</a>
</code></td>
<td>Meters per volt units 0.001</td>
<td>Scaling factor between sonar reading and distance. For the linear and inverted functions this is in meters per volt. For the hyperbolic function the units are Volts.</td>
</tr>
<tr>
<td><code><a href="http://rover.ardupilot.com/wiki/apmrover2-parameters/#Sonar_offset_SONAR_OFFSET">SONAR_OFFSET(2)</a>
</code></td>
<td>Offset in volts, Increment 0.001</td>
<td>Offset in volts for zero distance.</td>
</tr>
<tr>
<td><code><a href="http://rover.ardupilot.com/wiki/apmrover2-parameters/#Sonar_function_SONAR2_FUNCTION">SONAR_FUNCTION(2)</a>
</code></td>
<td>0:Linear 1:Invert 2:Hyper</td>
<td>Control over what function is used to calculate distance. For a linear function, the distance is (voltage-offset)*scaling. For a inverted function the distance is (offset-voltage)*scaling. For a hyperbolic function the distance is scaling/(voltage-offset). The functions return the distance in meters.</td>
</tr>
<tr>
<td><code><a href="http://rover.ardupilot.com/wiki/apmrover2-parameters/#Sonar_minimum_distance_SONAR_MIN_CM">SONAR_MIN_CM(2)</a>
</code></td>
<td>Units Centimeters Increment 1</td>
<td>minimum distance in centimeters that sonar can reliably read</td>
</tr>
<tr>
<td><code><a href="http://rover.ardupilot.com/wiki/apmrover2-parameters/#Sonar_maximum_distance_SONAR_MAX_CM">SONAR_MAX_CM(2)</a>
</code></td>
<td>Units Centimeters Increment 1</td>
<td>maximum distance in centimeters that sonar can reliably read</td>
</tr>
<tr>
<td><code><a href="http://rover.ardupilot.com/wiki/apmrover2-parameters/#Sonar_enabled_SONAR_ENABLE">SONAR_ENABLE(2)</a>
</code></td>
<td>1 = Enable, 0 = Disable</td>
<td>Set to 1 to enable this SONAR</td>
</tr>
<tr>
<td><code><a href="http://rover.ardupilot.com/wiki/apmrover2-parameters/#Sonar_stop_pin_SONAR_STOP_PIN">SONAR_STOP_PIN(2)</a>
</code></td>
<td>0=Disable, 1=enable</td>
<td>Digital pin that enables/disables sonar measurement. A value of -1 means no pin. If this is set, then the pin is set to 1 to enable the sonar and set to 0 to disable it. This can be used to ensure that multiple sonars donâ€™t interfere with each other.</td>
</tr>
<tr>
<td><code><a href="http://rover.ardupilot.com/wiki/apmrover2-parameters/#Sonar_settle_time_SONAR_SETTLE_MS">SONAR_SETTLE_MS(2)</a></code></td>
<td>Units: Milliseconds Increment: 1</td>
<td>The time in milliseconds that the sonar reading takes to settle. This is only used when a STOP_PIN is specified. It determines how long we have to wait for the sonar to give a reading after we set the STOP_PIN high. For a sonar with a range of around 7m this would need to be around 50 milliseconds to allow for the sonar pulse to travel to the target and back again.</td>
</tr>
</tbody>
</table>

The parameters are set in the <em>Mission Planner</em>  <strong>CONFIG/TUNING| Basic Tuning</strong> or <strong>CONFIG/TUNING | Standard Params</strong> pages):

[caption id="attachment_227" align="alignnone" width="1023"]<a href="http://rover.ardupilot.com/wp-content/uploads/sites/4/2013/04/MP_rover_parameter.jpg"><img src="http://rover.ardupilot.com/wp-content/uploads/sites/4/2013/04/MP_rover_parameter.jpg" alt="Mission Planner: Rover Skid-Steer Parameters" width="1023" height="813" class="size-full wp-image-227" /></a> Mission Planner: Rover Sonar Parameters[/caption]

[caption id="attachment_4388" align="alignnone" width="1025"]<a href="http://rover.ardupilot.com/wp-content/uploads/sites/4/2015/06/MissionPlanner_Rover_Basic_Tuning.png"><img src="http://rover.ardupilot.com/wp-content/uploads/sites/4/2015/06/MissionPlanner_Rover_Basic_Tuning.png" alt="Mission Planner: Rover Basic Tuning" width="1025" height="576" class="size-full wp-image-4388" /></a> Mission Planner: Rover Basic Tuning[/caption]

[note]All parameters may be adjusted in the "Advanced Parameter List" in Mission Planner. All the Rover user settable parameters are listed in <a href="http://rover.ardupilot.com/wiki/apmrover2-parameters/">APMrover2 Parameters</a>.[/note]