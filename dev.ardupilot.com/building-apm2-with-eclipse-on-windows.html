<!-- 
START METADATA - Only title should be translated 
slug: building-apm2-with-eclipse-on-windows 
title: Building ArduPilot for APM2.x with Eclipse on Windows 
id: 3048 
menu_order: 70 
post_parent_id: 0 
post_parent_stub:  
post_parent_title:  
END METADATA 
-->
This article shows how to build ArduPilot for APM2.x on Windows using the Eclipse IDE. <!--more -->
[note]These instructions show to use <em>Eclipse Luna</em> from the <em>PX4 Toolchain</em> to build for APM targets. They have been tested by building the <em>ArduCopter-3.2.1</em> branch on Windows 10.[/note][warning]Copter 3.3 firmware (and later) and builds after Plane 3.4.0 no longer fit on APM2.x boards. Plane, Rover and AntennaTracker builds can still be installed at time of writing but you can no longer build APM2.x off the master branch (you will need to build off a supported release branch).
&nbsp;
The last Copter firmware that can be built on APM 2.x <a title="DIY Drones Firmware" href="http://firmware.ardupilot.org/downloads/wiki/firmware/ArduCopter_APM_2.0_Firmware_3.2.1.zip">can be downloaded from here</a>.
[/warning]


<h1>Preconditions</h1>

Follow the instructions in <a href="building-ardupilot-for-apm2-x-on-windows-with-make">Building ArduPilot for APM2.x on Windows with Make</a>. These show how to download the source code, install the needed tools (including Eclipse) and how to set up the environment.
[tip]Make sure you update the <strong>config.mk</strong> with the location of your ARDUINO tools.[/tip]


<h1>Starting Eclipse</h1>

Start Eclipse using the <em>PX4 Eclipse</em> link installed with the <em>PX4 toolchain</em>. The link can be accessed from either:
<ul>
 	<li>The Windows Start menu (<strong>Start | All Programs | PX4 Toolchain | PX4 Eclipse</strong>), or</li>
	<li>You can directly run the file <strong>C:\px4\toolchain\msys\1.0\px4_eclipse.bat</strong></li>
</ul>


<h1>Creating the Project</h1>

Create the project:
<ul>
	<li>Select <strong>File | New | Make Project with Existing Code</strong></li>
	<li>Fill in the Project Name and set the <em>Existing Code Location</em> to the Copter directory</li>
	<li>Set the Toolchain to be <em>Cross GCC</em>" and press <strong>Finish</strong></li>
</ul>

<a href="http://dev.ardupilot.com/wp-content/uploads/sites/6/2013/12/EditingTheCode_Eclipse2.png"><img class="alignnone size-full wp-image-3689" src="http://dev.ardupilot.com/wp-content/uploads/sites/6/2013/12/EditingTheCode_Eclipse2.png" alt="EditingTheCode_Eclipse2" width="753" height="603" /></a>


<h1>Use spaces instead of tabs</h1>

By default Copter, Plane and Rover use spaces in place of tabs. This can be set to the default in Eclipse by changing two settings:

<ul>
	<li>Select <strong>Window | Preferences | General | Editors | Text Editors | Insert spaces for tabs</strong>.

<a href="http://dev.ardupilot.com/wp-content/uploads/sites/6/2013/12/EditingTheCode_Eclipse_spaces1.png"><img class="alignnone size-large wp-image-4323" src="http://dev.ardupilot.com/wp-content/uploads/sites/6/2013/12/EditingTheCode_Eclipse_spaces1-1024x679.png" alt="EditingTheCode_Eclipse_spaces1" width="584" height="387" /></a></li>


	<li>Select <strong>Windows | Preferences | C/C++ | Code Style | Formatter</strong> and creating a new Profile (i.e. "K&amp;R Tab") which has the "Indentation" set to "Spaces only"

<a href="http://dev.ardupilot.com/wp-content/uploads/sites/6/2013/12/EditingTheCode_Eclipse_spaces2.png"><img class="alignnone size-large wp-image-4324" src="http://dev.ardupilot.com/wp-content/uploads/sites/6/2013/12/EditingTheCode_Eclipse_spaces2-1024x511.png" alt="EditingTheCode_Eclipse_spaces2" width="584" height="291" /></a>
</li>
</ul>




<h1>Specify build location</h1>

In the <em>Project Explorer</em> right-mouse-click on the ardupilot folder and select <strong>Properties</strong>. Then under C/C++ Build set the "Build location" to the Copter or Plane directory as shown below.

<a href="http://dev.ardupilot.com/wp-content/uploads/sites/6/2013/12/EditingTheCode_Eclipse6.png"><img class="alignnone size-full wp-image-4289" src="http://dev.ardupilot.com/wp-content/uploads/sites/6/2013/12/EditingTheCode_Eclipse6.png" alt="EditingTheCode_Eclipse6" width="1582" height="922" /></a>

<h1>Specify make target</h1>

In the Make window on the right create, specify an <code>apm2</code> make target as shown:

[caption id="attachment_6250" align="alignnone" width="840"]<a href="http://dev.ardupilot.com/wp-content/uploads/sites/6/2013/08/Eclipse_SetAPM2BuildTarget.png"><img src="http://dev.ardupilot.com/wp-content/uploads/sites/6/2013/08/Eclipse_SetAPM2BuildTarget.png" alt="Eclipse: Setting the apm2 make target" width="840" height="592" class="size-full wp-image-6250" /></a> Eclipse: Setting the apm2 make target[/caption]



<h1>Building from Eclipse</h1>

The make target can be built by pushing the green circle + hammer icon.  The build progress will appear in the Console window.

[caption id="attachment_6251" align="alignnone" width="858"]<a href="http://dev.ardupilot.com/wp-content/uploads/sites/6/2013/08/Eclipse_BuildPM2.png"><img src="http://dev.ardupilot.com/wp-content/uploads/sites/6/2013/08/Eclipse_BuildPM2.png" alt="Eclipse: Building APM2" width="858" height="625" class="size-full wp-image-6251" /></a> Eclipse: Building APM2[/caption]


The firmware will be created in a subfolder of the user’s temp directory. For example you will find <strong>ArduCopter.hex</strong> in <strong>C:\Users\<strong>YourUserNameHere</strong>\AppData\Local\Temp\ArduCopter.build</strong>.


